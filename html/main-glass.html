<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John Doe - .NET Engineer</title>

    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">


    <!-- Custom Styles & Tailwind Config -->
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/hero.css">
    <link rel="stylesheet" href="../css/competencies.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="stylesheet" href="../css/header.css">

</head>

<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="header">
        <div class="header-container show-mobile-nav glass-panel">
            <div class="header-content">
                <a href="/" id="home-link-logo" class="logo">Roman Dotsenko</a>
                <nav class="nav-desktop">
                    <a href="/" id="home-link" class="nav-link">Home</a>
                    <a href="projects.html" id="projects-link" class="nav-link">Projects</a>
                    <a href="mailto:your.email@example.com" class="contact-link" id="contact-email">Contact Me</a>
                </nav>
                <nav id="mobile-menu" class="nav-mobile">
                    <a href="mailto:your.email@example.com" class="contact-link" id="contact-email" >Contact Me</a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Home/About Me Page -->
        <div id="page-home">
            <section class="hero-section">
                <div class="hero-container glass-panel">
                    <div class="hero-content">
                        <!-- Profile Picture -->
                        <div class="hero-image-wrapper fade-in">
                            <img src="https://placehold.co/400x400/0c0a18/FFFFFF?text=JD"
                                alt="Profile picture of John Doe" class="hero-image" id="hero-image"
                                onerror="this.onerror=null;this.src='https://placehold.co/400x400/0c0a18/FFFFFF?text=JD';">
                        </div>
                        <!-- Text Content -->
                        <div class="hero-text">
                            <h1 class="hero-title fade-in" style="transition-delay: 100ms;" id="hero-title">
                                Building the Future
                                <br>
                                with <span class="accent-color">.NET</span>.
                            </h1>
                            <p class="hero-subtitle fade-in" style="transition-delay: 300ms;" id="hero-subtitle">
                                I'm John Doe, a .NET Engineer creating robust, scalable, and elegant solutions for the
                                modern web.
                            </p>
                            <div class="hero-buttons fade-in" style="transition-delay: 500ms;">
                                <a href="projects.html" id="view-projects-button"
                                    class="hero-button hero-button-primary">Explore My Work</a>
                                <a href="#" id="resume-button" class="hero-button hero-button-secondary">My Resume</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="competencies-section fade-in">
                <div class="competencies-container">
                    <h2 class="competencies-title" id="competencies-title">Core Competencies</h2>
                    <div class="competencies-grid" id="skills-grid">
                        <!-- Skills will be populated from JSON -->
                    </div>
                </div>
            </section>
        </div>

    </main>

    <footer class="footer">
        <p>&copy; <span id="footer-year">2024</span> <span id="footer-author"></span>.
    </footer>

    <script src="../js/header.js"></script>
    <script src="../js/animations.js"></script>
    <script src="../js/hero.js"></script>

    <script>
        // Load site data and populate content
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const res = await fetch('../data/site.json', { cache: 'no-cache' });
                if (!res.ok) throw new Error('Failed to load site data');
                const data = await res.json();

                // Small helper to resolve hrefs from /html pages
                const resolveHref = (href) => {
                    if (!href) return '#';
                    if (/^(https?:)?\/\//i.test(href) || href.startsWith('mailto:') || href.startsWith('/')) return href;
                    if (href.startsWith('docs/') || href.startsWith('images/') || href.startsWith('data/')) return `../${href}`;
                    return href; // e.g. projects.html in same /html folder
                };

                // Header
                const logoEl = document.getElementById('home-link-logo');
                const contactEl = document.getElementById('contact-email');
                if (logoEl && data.site?.author) logoEl.textContent = data.site.author;
                if (contactEl && data.site?.email) contactEl.href = `mailto:${data.site.email}`;

                // Email links (desktop + mobile)
                const email = data.site?.email;
                if (email) {
                    const contactDesktop = document.getElementById('contact-email');
                    const contactMobile = document.getElementById('mobile-contact-email');
                    if (contactDesktop) contactDesktop.href = `mailto:${email}`;
                    if (contactMobile) contactMobile.href = `mailto:${email}`;
                }

                // Footer
                const yearEl = document.getElementById('footer-year');
                const authorEl = document.getElementById('footer-author');
                if (yearEl) yearEl.textContent = data.site?.year ?? new Date().getFullYear();
                if (authorEl) authorEl.textContent = data.site?.author ?? 'John Doe';

                // Hero
                const titleEl = document.getElementById('hero-title');
                const subtitleEl = document.getElementById('hero-subtitle');
                const ctaPrimary = document.getElementById('view-projects-button');
                const ctaSecondary = document.getElementById('resume-button');
                const heroImg = document.getElementById('hero-image');

                if (titleEl && data.home?.title) titleEl.innerHTML = data.home.title;
                if (subtitleEl && data.home?.subtitle) subtitleEl.textContent = data.home.subtitle;
                if (ctaPrimary && data.home?.ctaPrimary) {
                    ctaPrimary.textContent = data.home.ctaPrimary.text;
                    ctaPrimary.href = resolveHref(data.home.ctaPrimary.href);
                }
                if (ctaSecondary && data.home?.ctaSecondary) {
                    ctaSecondary.textContent = data.home.ctaSecondary.text;
                    ctaSecondary.href = resolveHref(data.home.ctaSecondary.href);
                    if (data.home.ctaSecondary.download) {
                        ctaSecondary.setAttribute('download', data.home.ctaSecondary.filename || '');
                    } else {
                        ctaSecondary.removeAttribute('download');
                    }
                }
                if (heroImg && data.home?.profileImage) {
                    heroImg.src = resolveHref(data.home.profileImage);
                    heroImg.alt = `Profile picture of ${data.site?.author || 'John Doe'}`;
                }

                // Competencies title
                const compTitle = document.getElementById('competencies-title');
                if (compTitle && data.home?.competenciesTitle) compTitle.textContent = data.home.competenciesTitle;

                // Skills (accept strings or { name, icon })
                const skillsGrid = document.getElementById('skills-grid');
                if (skillsGrid && Array.isArray(data.home?.skills)) {
                    skillsGrid.innerHTML = data.home.skills.map((entry, i) => {
                        const isObj = entry && typeof entry === 'object';
                        const name = isObj ? (entry.name || '') : entry;
                        const icon = isObj ? entry.icon : undefined;
                        const iconSrc = icon ? resolveHref(icon) : null;
                        const iconHTML = iconSrc ? `<img src="${iconSrc}" alt="${name} icon" loading="lazy" style="width:40px;height:40px;object-fit:contain;margin-right:8px;" />` : '';
                        return `
                <div class=\"competency-card glass-panel\" style=\"display:flex;align-items:center;gap:8px;transition-delay: ${100 * (i + 1)}ms;\">
                  ${iconHTML}<span class=\"competency-name\">${name}</span>
                </div>
              `;
                    }).join('');
                }
            } catch (e) {
                console.error(e);
            }
        });
    </script>
</body>

</html>